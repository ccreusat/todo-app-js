var Konami=function(callback){var konami={addEvent:function(obj,type,fn,ref_obj){obj.addEventListener?obj.addEventListener(type,fn,!1):obj.attachEvent&&(obj["e"+type+fn]=fn,obj[type+fn]=function(){obj["e"+type+fn](window.event,ref_obj)},obj.attachEvent("on"+type,obj[type+fn]))},removeEvent:function(obj,eventName,eventCallback){obj.removeEventListener?obj.removeEventListener(eventName,eventCallback):obj.attachEvent&&obj.detachEvent(eventName)},input:"",pattern:"38384040373937396665",keydownHandler:function(e,ref_obj){if(ref_obj&&(konami=ref_obj),konami.input+=e?e.keyCode:event.keyCode,konami.input.length>konami.pattern.length&&(konami.input=konami.input.substr(konami.input.length-konami.pattern.length)),konami.input===konami.pattern)return konami.code(konami._currentLink),konami.input="",e.preventDefault(),!1},load:function(link){this._currentLink=link,this.addEvent(document,"keydown",this.keydownHandler,this),this.iphone.load(link)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler),this.iphone.unload()},code:function(link){window.location=link},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],input:[],code:function(link){konami.code(link)},touchmoveHandler:function(e){if(1===e.touches.length&&!0===konami.iphone.capture){var touch=e.touches[0];konami.iphone.stop_x=touch.pageX,konami.iphone.stop_y=touch.pageY,konami.iphone.tap=!1,konami.iphone.capture=!1,konami.iphone.check_direction()}},touchendHandler:function(){if(konami.iphone.input.push(konami.iphone.check_direction()),konami.iphone.input.length>konami.iphone.keys.length&&konami.iphone.input.shift(),konami.iphone.input.length===konami.iphone.keys.length){for(var match=!0,i=0;i<konami.iphone.keys.length;i++)konami.iphone.input[i]!==konami.iphone.keys[i]&&(match=!1);match&&konami.iphone.code(konami._currentLink)}},touchstartHandler:function(e){konami.iphone.start_x=e.changedTouches[0].pageX,konami.iphone.start_y=e.changedTouches[0].pageY,konami.iphone.tap=!0,konami.iphone.capture=!0},load:function(link){this.orig_keys=this.keys,konami.addEvent(document,"touchmove",this.touchmoveHandler),konami.addEvent(document,"touchend",this.touchendHandler,!1),konami.addEvent(document,"touchstart",this.touchstartHandler)},unload:function(){konami.removeEvent(document,"touchmove",this.touchmoveHandler),konami.removeEvent(document,"touchend",this.touchendHandler),konami.removeEvent(document,"touchstart",this.touchstartHandler)},check_direction:function(){return x_magnitude=Math.abs(this.start_x-this.stop_x),y_magnitude=Math.abs(this.start_y-this.stop_y),x=this.start_x-this.stop_x<0?"RIGHT":"LEFT",y=this.start_y-this.stop_y<0?"DOWN":"UP",result=x_magnitude>y_magnitude?x:y,result=!0===this.tap?"TAP":result,result}}};return"string"==typeof callback&&konami.load(callback),"function"==typeof callback&&(konami.code=callback,konami.load()),konami};"undefined"!=typeof module&&void 0!==module.exports?module.exports=Konami:"function"==typeof define&&define.amd?define([],(function(){return Konami})):window.Konami=Konami;