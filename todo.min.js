!function(){"use strict";window.todoApp=function(){let todos=useLocalStorage.getItem("todos")||[{id:1,text:"up",isCompleted:!1},{id:2,text:"up",isCompleted:!1},{id:3,text:"down",isCompleted:!1},{id:4,text:"down",isCompleted:!1},{id:5,text:"left",isCompleted:!1},{id:6,text:"right",isCompleted:!1},{id:7,text:"left",isCompleted:!1},{id:8,text:"right",isCompleted:!1},{id:9,text:"B",isCompleted:!1},{id:10,text:"A",isCompleted:!1}];var app={config:{inputTrigger:document.getElementById("add-input"),checkboxTrigger:document.getElementById("add-checkbox"),formTrigger:document.getElementById("todo-form"),todoListTrigger:document.getElementById("todoList"),filterByCompletedTrigger:document.getElementById("filter-completed"),filterByActiveTrigger:document.getElementById("filter-active"),clearTrigger:document.getElementById("clear"),filterByAllTrigger:document.getElementById("filter-all"),countTrigger:document.getElementById("count"),footerTrigger:document.getElementById("footer")},init:function(){app.config.formTrigger.onsubmit=e=>e.preventDefault(),todos&&(todos.forEach(todo=>{app.createAndUpdateTodo(todo.id,todo.text,todo.isCompleted)}),app.showHideFooter(todos)),app.sortableTodos(),app.config.inputTrigger.addEventListener("keyup",(function(e){13!==e.key&&"Enter"!==e.key||app.addNewTodo(e)})),app.config.checkboxTrigger.onclick=e=>app.addNewTodo(e),app.config.filterByCompletedTrigger.onclick=()=>app.filterCompleted(),app.config.filterByActiveTrigger.onclick=()=>app.filterActive(),app.config.filterByAllTrigger.onclick=()=>app.filterAll(),app.config.clearTrigger.onclick=()=>app.clearTodo(),app.countItems(todos)},createAndUpdateTodo:function(id,value,isCompleted){const todoElement=document.createElement("div"),labelElement=document.createElement("label"),checkboxElement=document.createElement("input"),textElement=document.createElement("span"),deleteTodoButton=document.createElement("span");function completeTodo(event){!0===checkboxElement.checked?(checkboxElement.checked=!0,app.updateTodo(value,!0),todoElement.className+=" completed"):(checkboxElement.checked=!1,app.updateTodo(value,!1),todoElement.className="todo"),useLocalStorage.setItem("todos",todos),app.countItems(todos),app.showHideFooter(todos)}function deleteTodo(event){event.target.parentElement.remove(),todos=todos.filter(todo=>todo.id!==id),app.countItems(todos),0===todos.length&&(useLocalStorage.removeItem("todos"),app.showHideFooter(todos))}todoElement.className="todo",todoElement.setAttribute("data-id",id),checkboxElement.type="checkbox",checkboxElement.name="checkbox",checkboxElement.value=value+"_"+id,checkboxElement.checked=isCompleted||!1,checkboxElement.className="todo__checkbox",textElement.className="todo__text",textElement.textContent=value,deleteTodoButton.className="todo__delete",labelElement.className="todo__label",!0===checkboxElement.checked?todoElement.className+=" completed":todoElement.className="todo",labelElement.addEventListener("click",(function(e){completeTodo(e)})),deleteTodoButton.addEventListener("click",(function(e){deleteTodo(e)})),todoElement.appendChild(labelElement),todoElement.appendChild(deleteTodoButton),labelElement.appendChild(checkboxElement),labelElement.appendChild(textElement),app.config.todoListTrigger.appendChild(todoElement)},addNewTodo:function(e){if(e.preventDefault(),""!==app.config.inputTrigger.value){let target=app.config.inputTrigger.value,id=app.generateRandomID();app.createAndUpdateTodo(id,target),todos=[...todos,{id:id,text:target,isCompleted:!1}],app.countItems(todos),app.showHideFooter(todos),useLocalStorage.setItem("todos",todos),app.config.inputTrigger.value=""}},updateTodo:function(text,isCompleted){const index=todos.findIndex(todo=>todo.text===text);todos[index].isCompleted=isCompleted},showHideFooter:function(arr){0!==arr.length&&arr?app.config.footerTrigger.style.display="flex":app.config.footerTrigger.style.display="none"},generateRandomID:function(){return Math.random().toString(36).substr(2,9)},filterCompleted:function(){let completedTodos;if(!todos.filter(todo=>!0===todo.isCompleted).length){const text=document.createElement("p");text.textContent="No todo completed yet!",text.className="none-completed",app.config.todoListTrigger.appendChild(text)}todoList.querySelectorAll(".todo").forEach(todo=>{todo.querySelector("input").checked?todo.style.display="flex":todo.style.display="none"})},filterActive:function(){document.querySelector(".none-completed")&&document.querySelector(".none-completed").remove(),app.config.todoListTrigger.querySelectorAll(".todo").forEach(todo=>{todo.style.display="none",todo.querySelector("input").checked||(todo.style.display="flex")})},filterAll:function(){document.querySelector(".none-completed")&&document.querySelector(".none-completed").remove(),app.config.todoListTrigger.querySelectorAll(".todo").forEach(todo=>{todo.style.display="flex"})},clearTodo:function(){let activeTodos=todos.filter(todo=>!1===todo.isCompleted);todos=activeTodos,app.config.todoListTrigger.innerHTML="",todos.forEach(todo=>{app.createAndUpdateTodo(todo.id,todo.text,todo.isCompleted)}),useLocalStorage.setItem("todos",todos),app.sortableTodos(),app.config.filterByCompletedTrigger.checked=!1,app.config.filterByAllTrigger.checked=!0,app.showHideFooter(todos)},countItems:function(arr){const countTodoLeft=arr.filter(todo=>!1===todo.isCompleted);app.config.countTrigger.innerHTML=countTodoLeft.length+" items left"},sortableTodos:function(){Sortable.create(todoList,{store:{get:function(sortable){var order=useLocalStorage.getItem(sortable.options.group.name);return order?order.split("|"):[]},set:function(sortable){var order=sortable.toArray();useLocalStorage.setItem(sortable.options.group.name,order.join("|"))}}})}};app&&app.init()},document.addEventListener("DOMContentLoaded",(function(){window.todoApp()}))}();